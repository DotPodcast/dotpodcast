<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


  <title>Subscription tokens</title>


  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin" />
  <meta name="generator" content="Pelican" />
  <link href="https://dotpodcast.github.io/dotpodcast" rel="canonical" />

  <!-- Feed -->
        <link href="https://dotpodcast.github.io/dotpodcast/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="DotPodcast Full Atom Feed" />

  <link href="https://dotpodcast.github.io/dotpodcast/theme/css/style.css" type="text/css" rel="stylesheet" />

  <!-- Code highlight color scheme -->
      <link href="https://dotpodcast.github.io/dotpodcast/theme/css/code_blocks/github.css" rel="stylesheet">


  <!-- Custom fonts -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,300" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Kenia" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->

      <meta property="og:locale" content="" />
    <meta property="og:site_name" content="DotPodcast" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="DotPodcast" />
    <meta property="og:description" content="View the blog." />
    <meta property="og:url" content="https://dotpodcast.github.io/dotpodcast" />
      <meta property="og:image" content="https://dotpodcast.github.io/dotpodcast/images/header.jpg" />
</head>
<!-- TODO : Body class -->
<body class="home-template">

<nav id="menu">
  <a class="close-button">Close</a>
  <div class="nav-wrapper">
    <p class="nav-label">Menu</p>
    <ul>
          <li><a href="/" role="presentation">Home</a></li>
          <li><a href="/spec-v1" role="presentation">Feed spec v1</a></li>
          <li><a href="/taxonomies" role="presentation">Taxonomies</a></li>
          <li><a href="/guides/hosting" role="presentation">Building a hosting service</a></li>
          <li><a href="/guides/directories" role="presentation">Building a directory</a></li>
          <li><a href="/guides/apps" role="presentation">Building a podcast app</a></li>
          <li><a href="/blog.html" role="presentation">Blog</a></li>


    </ul>
  </div>
</nav>
    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header id="post-header" class="has-cover">
      <div class="inner">
        <nav id="navigation">
            <span id="home-button" class="nav-button">
                <a class="home-button" href="https://dotpodcast.github.io/dotpodcast" title="Home"><i class="ic ic-arrow-left"></i> Home</a>
            </span>
          <span id="menu-button" class="nav-button">
            <a class="menu-button"><i class="ic ic-menu"></i> Menu</a>
          </span>
        </nav>
        <h1 class="post-title">Subscription tokens</h1>      
            <div class="post-cover cover" style="background-image: url('images/header.jpg')">            
        
      </div>
    </header>    

  <section id="wrapper">
    <a class="hidden-close"></a>
  <!-- Post content -->
  <main class="content" role="main">
      <article class="post">
      <div class="inner">
          <section class="post-content">
              <p>Historically, it has been impossible to know how many people have subscribed to a podcast. This makes it impossible to reliably distinguish one media download from another, when coming from the same network, or whether a download on one device was started along with another on a different device, by the same user.</p>
<p>DotPodcast solves this problem by creating a pseudonymised subscription system, that identifies a listener to a specific podcast, so that their downloads can be distinguished from other listeners, but does not share information across podcasts.</p>
<p>The following is a comprehensive description of the system, from end to end. Guides are also available, with more domain-specific information for:</p>
<ul>
<li><a href="/guides/hosting">podcast hosting providers</a></li>
<li><a href="/guides/directories">podcast directory developers</a></li>
<li><a href="/guides/apps">podcast player (or "podcatcher") developers</a></li>
</ul>
<h2 id="generating-a-subscription-token">Generating a subscription token</h2>
<p>There are three types of subscription tokens that can be generated:
- <a href="#preview-tokens">preview tokens</a>
- <a href="#download-tokens">download tokens</a>
- <a href="#transit-tokens">transit tokens</a></p>
<h3 id="preview-tokens">Preview tokens</h3>
<p>A preview token is required for podcast directories that want to allow episodes to be played via a podcast's landing or listing page. The same content is delivered when a listener previews the episode, but the hosting service is able to determine the behaviour so that it can be reflected adequately in analytics.</p>
<h4 id="obtaining-a-preview-token">Obtaining a preview token</h4>
<p>A token is obtained by calling a podcast's subscription URL via an HTTP POST containing a subscriber hash and optional information. For example:</p>
<div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/dp-subscribe/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">thedotpodcastshow.com</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
    <span class="nt">&quot;app_name&quot;</span><span class="p">:</span> <span class="s2">&quot;DotPodcast Directory&quot;</span><span class="p">,</span>
    <span class="nt">&quot;app_url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://directory.dotpodcast.org/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;token_kind&quot;</span><span class="p">:</span> <span class="s2">&quot;preview&quot;</span>
<span class="p">}</span>
</pre></div>


<p>The <code>app_url</code> value distinguishes the app or directory service from other such consumers and is used when generating a JSON Web Token for downloading episodes. The <code>token_type</code> (which must be set, and equal <code>"preview"</code>) instructs the server which type of token to expect. The <code>app_name</code> value is optional.</p>
<p>The hosting provider will return a JSON object in the following form:</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;preview_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;a7K9N7ye2K3VpPVq7hZAfXhMYJKMtkQOAWXzWeYT15KLon209zpuT5jfY2QE4sz2&quot;</span>
<span class="p">}</span>
</pre></div>


<p>The directory service stores the secret for later use.</p>
<h3 id="download-tokens">Download tokens</h3>
<p>Download tokens are obtained by podcast players, and are bound to a specific user of a podcast app.</p>
<h4 id="obtaining-a-download-token">Obtaining a download token</h4>
<p>A token is obtained by calling a podcast's subscription URL via an HTTP POST containing a subscriber hash and optional information. For example:</p>
<div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/dp-subscribe/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">thedotpodcastshow.com</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
    <span class="nt">&quot;app_name&quot;</span><span class="p">:</span> <span class="s2">&quot;DotPodcast Player&quot;</span><span class="p">,</span>
    <span class="nt">&quot;app_url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://player.dotpodcast.org/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;app_logo&quot;</span><span class="p">:</span> <span class="s2">&quot;https://player.dotpodcast.org/img/logo.svg&quot;</span><span class="p">,</span>
    <span class="nt">&quot;token_kind&quot;</span><span class="p">:</span> <span class="s2">&quot;download&quot;</span><span class="p">,</span>
    <span class="nt">&quot;subscriber_hash&quot;</span><span class="p">:</span> <span class="s2">&quot;eae950252dec7434b6d98d16dfc8dbd63552ba27&quot;</span><span class="p">,</span>
    <span class="nt">&quot;subscriber_details&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;country&quot;</span><span class="p">:</span> <span class="s2">&quot;United States&quot;</span><span class="p">,</span>
        <span class="nt">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;New York, NY&quot;</span><span class="p">,</span>
        <span class="nt">&quot;platform&quot;</span><span class="p">:</span> <span class="s2">&quot;ios&quot;</span><span class="p">,</span>
        <span class="nt">&quot;device_type&quot;</span><span class="p">:</span> <span class="s2">&quot;phone&quot;</span><span class="p">,</span>
        <span class="nt">&quot;device_name&quot;</span><span class="p">:</span> <span class="s2">&quot;iPhone X&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>The <code>app_url</code> value is required, as it is used for generating a JSON Web Token for downloading episodes.</p>
<p>The <code>app_name</code> and <code>app_logo</code> values are optional but recommended for allowing hosting services to identify an app within their analytics dashboard.</p>
<p>The <code>token_type</code> must be set, and equal to <code>"download"</code>.</p>
<p>The <code>subscriber_hash</code> value should be an SHA256 string made up of information that uniquely identifies the user and app, for example: the public key of the user and the URL to the app, joined via a single space. Alternatively, an app may generate uniquely-identifiable IDs for its users.</p>
<p>Podcast hosting providers should enforce regular expression checking on the hash, to ensure that a valid value has been generated. An example regular expression for an SHA256 string is <code>[A-Fa-f0-9]{64}</code>, and reject requests containing hash strings that don't conform. This will help regulate behaviour among app developers and hosting providers.</p>
<p>The <code>subscriber_details</code> object should contain the above information, but nothing that is identifiable to the app user.</p>
<p>The hosting provider will return a JSON object in the following form:</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;subscriber_hash&quot;</span><span class="p">:</span> <span class="s2">&quot;eae950252dec7434b6d98d16dfc8dbd63552ba27&quot;</span><span class="p">,</span>
    <span class="nt">&quot;subscriber_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;9hU9ikElLJsNAKf9qnkbfAdSSszdLHQECdGP6CWzo3lSSICvwiZnNTfjIthppOIr&quot;</span>
<span class="p">}</span>
</pre></div>


<p>The podcast player stores the secret for later use.</p>
<hr>
<p>Once a preview or download token (a subscription token) has been generated, it can be used when requesting the download of a piece of podcast content. See <a href="../requesting-content">Requesting content</a>.</p>
<h3 id="transit-tokens">Transit tokens</h3>
<p>A transit token is a way of identifying one hosting service from another, so that users can move between providers easily, and so that when an incoming provider obtains content to move it to their own storage, the download is not tracked and added to analytics.</p>
<p>Specifications for transit tokens are coming soon.</p>
          </section>
      </div>
      </article>
  </main>
      <!-- TODO : Body class -->
    <div id="body-class" style="display: none;" class=""></div>

    <footer id="footer">
      <div class="inner">
        <section class="credits">
          <span class="credits-theme">Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a></span>
          <span class="credits-software">Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a></span>
        </section>
      </div>
    </footer>
  </section>

  <script type="text/javascript" src="https://dotpodcast.github.io/dotpodcast/theme/js/script.js"></script>

</body>
</html>